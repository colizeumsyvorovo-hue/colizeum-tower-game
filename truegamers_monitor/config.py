"""
Конфигурационный файл для бота
"""
import os
from dotenv import load_dotenv

# Загружаем .env с обработкой ошибок кодировки
try:
    # Пробуем загрузить .env файл
    if os.path.exists('.env'):
        # Если файл существует, пробуем загрузить с правильной кодировкой
        try:
            load_dotenv(encoding='utf-8')
        except UnicodeDecodeError:
            # Если ошибка кодировки, пробуем с игнорированием ошибок
            try:
                load_dotenv(encoding='utf-8', errors='ignore')
            except Exception:
                # Если все равно не получается, пропускаем
                print("⚠️ Предупреждение: Не удалось загрузить .env файл из-за проблем с кодировкой.")
                print("   Удалите файл .env и создайте новый в кодировке UTF-8.")
    else:
        # Если файла нет, просто пробуем загрузить (может быть в другом месте)
        load_dotenv()
except Exception as e:
    # Если не получается загрузить, просто пропускаем
    # Переменные можно задать через системные переменные окружения
    print(f"⚠️ Предупреждение: Не удалось загрузить .env файл: {e}")
    print("   Используйте системные переменные окружения или создайте .env файл в кодировке UTF-8.")

# Telegram Bot Token
TELEGRAM_BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN', '')

# ADB настройки
ADB_PATH = os.getenv('ADB_PATH', 'adb')  # Путь к adb, если не в PATH
DEVICE_ID = os.getenv('DEVICE_ID', '')  # ID устройства (можно оставить пустым для первого устройства)

# TrueGamers настройки
TRUEGAMERS_PACKAGE = 'com.truegamers.true_gamers'  # Имя пакета приложения
# Главная активность (можно оставить пустым - будет определено автоматически)
# Или укажите вручную, например: 'com.truegamers.true_gamers.MainActivity'
# Можно задать через .env: TRUEGAMERS_ACTIVITY=com.truegamers.true_gamers.MainActivity
TRUEGAMERS_ACTIVITY = os.getenv('TRUEGAMERS_ACTIVITY', '')  # По умолчанию пусто - будет определено автоматически

# Настройки мониторинга
MONITOR_INTERVAL = 60  # Интервал проверки в секундах

# ID чата для автоматической отправки посадки (если нужно, можно указать другой)
# Если не указано, будет использоваться чат, откуда был запущен мониторинг
TARGET_CHAT_ID_STR = os.getenv('TARGET_CHAT_ID', None)  # Можно указать например: -1001234567890
TARGET_CHAT_ID = int(TARGET_CHAT_ID_STR) if TARGET_CHAT_ID_STR and TARGET_CHAT_ID_STR.strip() else None

# Часовой пояс для планировщика
LOCAL_TZ = os.getenv('LOCAL_TZ', 'Asia/Yekaterinburg')  # По умолчанию Екатеринбург

# Координаты и элементы (нужно будет настроить под конкретное устройство)
LOGIN_COORDINATES = {
    'phone_input': (540, 800),  # Координаты поля ввода телефона
    'password_input': (540, 900),  # Координаты поля ввода пароля
    'login_button': (540, 1000),  # Координаты кнопки входа
}

CLUB_SELECTION = {
    'club_list': (540, 600),  # Координаты списка клубов
    'select_club': (540, 700),  # Координаты выбора клуба
}

PLACES_BUTTON = (407, 882)  # Координаты кнопки "Места" (найдено через UI Automator для разрешения 1440x2560)

# Координаты цифровой клавиатуры для ввода PIN
# Разрешение экрана: 1440 x 2560 пкс
# Координата (265, 1475) соответствует цифре "7" (измерено)
# Расстояние между кнопками: ~360px по горизонтали, ~200px по вертикали (для разрешения 1440x2560)
PIN_KEYPAD = {
    '1': (265, 1075),   # Первая строка, первая кнопка (1475 - 400, так как "7" на 1475, 2 строки по ~200px)
    '2': (625, 1075),   # Первая строка, вторая кнопка (265 + 360)
    '3': (985, 1075),   # Первая строка, третья кнопка (625 + 360)
    '4': (265, 1275),   # Вторая строка, первая кнопка (1075 + 200)
    '5': (625, 1275),   # Вторая строка, вторая кнопка
    '6': (985, 1275),   # Вторая строка, третья кнопка
    '7': (265, 1475),   # Третья строка, первая кнопка (измерено - нажимается)
    '8': (625, 1475),   # Третья строка, вторая кнопка (265 + 360)
    '9': (985, 1475),   # Третья строка, третья кнопка (625 + 360)
    '0': (625, 1675),   # Четвертая строка, вторая кнопка (по центру, 1475 + 200)
}

# PIN-код для входа
PIN_CODE = '1111'

